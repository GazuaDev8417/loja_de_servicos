(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{9013:function(e,t,r){Promise.resolve().then(r.bind(r,6446))},6446:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Profil}});var o=r(7437),n=r(2585),s=r(9150),i=r(4606),a=r(8910),l=r(4033),c=r(2265),u=r(5273),d=r(5322),f=r(3225),m=r.n(f);function Profil(){let{setters:e}=(0,c.useContext)(u.default),t=(0,l.useRouter)(),[r,f]=(0,c.useState)([]),[p,h]=(0,c.useState)(""),[_,v]=(0,c.useState)({id:"",name:"",email:"",password:"",subscription:""});(0,c.useEffect)(()=>{let e=localStorage.getItem("token");e||null==t||t.push("/"),getProfile(),getUserJobs()},[t]);let getProfile=async()=>{try{let e=await fetch("".concat(d._,"/user"),{headers:{Authorization:localStorage.getItem("token")||""}});if(!e.ok){let t=await e.text();if("jwt expired"===t)return alert("Seu token de acesso expirou, fa\xe7a login novamente.");return alert(t)}let t=await e.json();v(t)}catch(e){alert(e.message)}},getUserJobs=async()=>{try{let e=await fetch("".concat(d._,"/userjobs"),{headers:{Authorization:localStorage.getItem("token")||""}});if(!e.ok){let t=await e.text();if("jwt expired"===t)return alert("Seu token de acesso expirou, fa\xe7a login novamente.");return alert(t)}let t=await e.json();f(t)}catch(e){alert(e.message)}},withMouse=e=>{document.getElementById(e).style.color="red"},noMouse=e=>{document.getElementById(e).style.color="whitesmoke"},removeJob=async e=>{try{let t=window.confirm("Tem certeza que deseja excluir ".concat(e.title));if(t){let t=await fetch("".concat(d._,"/job/").concat(e.id),{method:"DELETE",headers:{Authorization:localStorage.getItem("token")||""}});t.ok||alert("Falha ao deletar servi\xe7o"),getUserJobs()}}catch(e){alert(e.message)}},x=r&&r.filter(e=>e.title.toLowerCase().includes(p.toLowerCase()));return(0,o.jsxs)("div",{children:[(0,o.jsx)(n.Z,{leftIcon:(0,o.jsx)(i.LDO,{onClick:()=>t.push("/list"),className:"icon"}),title:"Perfil do Usu\xe1rio",rightIcon:(0,o.jsx)(s.Mqe,{onClick:()=>{let e=window.confirm("Tem certeza que deseja deslogar?");e&&(localStorage.clear(),t.push("/"))},className:"icon"})}),(0,o.jsxs)("div",{className:m().container,children:[(0,o.jsxs)("div",{className:m().userSection,children:[(0,o.jsx)("b",{children:"Nome: "}),_.name,(0,o.jsx)("br",{}),(0,o.jsx)("b",{children:"Email: "}),_.email]}),(0,o.jsx)("div",{className:m().title,children:"Servi\xe7os cadastrados"}),(0,o.jsx)("div",{style:{border:"1px solid",margin:20}}),(0,o.jsx)("div",{style:{position:"relative"},children:(0,o.jsx)("input",{placeholder:"T\xedtulo do servi\xe7o                  \uD83D\uDD0E",className:m().input,type:"text",value:p,onChange:e=>h(e.target.value)})}),(0,o.jsx)("div",{style:{overflow:"auto"},children:x.length>0?x.map(r=>(0,o.jsxs)("div",{className:m().card,children:[(0,o.jsx)("div",{onClick:()=>{e.setJob(r),t.push("/detail")},style:{cursor:"pointer"},children:r.title}),(0,o.jsx)(a.ZkW,{style:{fontSize:20,cursor:"pointer",color:"whitesmoke"},id:r.id,onMouseOver:()=>withMouse(r.id),onMouseOut:()=>noMouse(r.id),onClick:()=>removeJob(r)})]},r.id)):null})]})]})}},2585:function(e,t,r){"use strict";r.d(t,{Z:function(){return Header}});var o=r(7437),n=r(9884),s=r.n(n);function Header(e){let{leftIcon:t,title:r,rightIcon:n}=e;return(0,o.jsxs)("div",{className:s().head,children:[t,(0,o.jsx)("h1",{children:r}),n]})}},5322:function(e,t,r){"use strict";r.d(t,{_:function(){return o}});let o="https://loja-de-servicos-server.vercel.app"},5273:function(e,t,r){"use strict";r.r(t),r.d(t,{GlobalState:function(){return GlobalState}});var o=r(7437),n=r(2265);let s=(0,n.createContext)(null),GlobalState=e=>{let[t,r]=(0,n.useState)([]),[i,a]=(0,n.useState)({id:"",title:"",description:"",phone:"",period:"",provider:""});return(0,o.jsx)(s.Provider,{value:{states:{services:t,job:i},setters:{setJob:a,setServices:r}},children:e.children})};t.default=s},3225:function(e){e.exports={container:"profile_container__CYebx",title:"profile_title__Qm44E",input:"profile_input__JJrVV",userSection:"profile_userSection__4zyg9",card:"profile_card__dHxCL"}},9884:function(e){e.exports={head:"Header_head__V4JD5"}},622:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o=r(2265),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var o,s={},c=null,u=null;for(o in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,o)&&!l.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:n,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=q,t.jsxs=q},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(290)},1172:function(e,t,r){"use strict";r.d(t,{w_:function(){return GenIcon}});var o=r(2265),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},s=o.createContext&&o.createContext(n),__assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},__rest=function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(r[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,o=Object.getOwnPropertySymbols(e);n<o.length;n++)0>t.indexOf(o[n])&&Object.prototype.propertyIsEnumerable.call(e,o[n])&&(r[o[n]]=e[o[n]]);return r};function GenIcon(e){return function(t){return o.createElement(IconBase,__assign({attr:__assign({},e.attr)},t),function Tree2Element(e){return e&&e.map(function(e,t){return o.createElement(e.tag,__assign({key:t},e.attr),Tree2Element(e.child))})}(e.child))}}function IconBase(e){var elem=function(t){var r,n=e.attr,s=e.size,i=e.title,a=__rest(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),o.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,a,{className:r,style:__assign(__assign({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&o.createElement("title",null,i),e.children)};return void 0!==s?o.createElement(s.Consumer,null,function(e){return elem(e)}):elem(n)}}},function(e){e.O(0,[447,582,712,971,864,744],function(){return e(e.s=9013)}),_N_E=e.O()}]);